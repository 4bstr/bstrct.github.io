(function(e){function t(t){for(var i,r,s=t[0],a=t[1],d=t[2],h=0,l=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&l.push(n[r][0]),n[r]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);u&&u(t);while(l.length)l.shift()();return c.push.apply(c,d||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],i=!0,s=1;s<o.length;s++){var a=o[s];0!==n[a]&&(i=!1)}i&&(c.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},n={app:0},c=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=a;c.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0876":function(e,t,o){"use strict";o("9478")},"18d3":function(e,t,o){"use strict";o("6f04")},"291a":function(e){e.exports=JSON.parse('{"params":{"awake":0},"choices":[{"id":0,"title":"Open my eyes","text":"The light pierce throught as I rediscover my world.","cooldown":1,"duration":1,"conditionsInit":[{"name":"awake","op":"==","value":0}],"conditions":[],"params":[{"name":"awake","op":"=","value":1}]},{"id":1,"title":"Keep sleeping","text":"I don\'t have to wake up.","cooldown":3,"duration":1,"conditionsInit":[],"conditions":[{"name":"awake","op":"==","value":0}],"params":{}},{"id":2,"title":"Coffee.","text":"Let\'s start with the fundamentals.","cooldown":2,"duration":1,"conditionsInit":[],"conditions":[{"name":"awake","op":"==","value":1}],"params":[{"name":"drinkCoffee","op":"=","value":1}]},{"id":3,"title":"Wait","text":"Time flies","cooldown":0,"duration":1,"conditionsInit":[],"conditions":[{}],"params":[]},{"id":4,"title":"One shot","text":"This will only happen once","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{}],"params":[{}]}],"choicesDisabled":[{"id":6,"title":"Shouldn\'t shows up","text":"Not sure what to say...","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{}],"params":[{}]}],"choicesOnCooldown":[{"id":5,"title":"Surprise !!","text":"it took time but it happened","cooldown":-1,"cdCount":6,"duration":1,"conditionsInit":[],"conditions":[{}],"params":[{}]}]}')},"346b":function(e,t,o){"use strict";o("cf69")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("7a23"),n={id:"lower"};function c(e,t,o,c,r,s){var a=Object(i["g"])("c-parser"),d=Object(i["g"])("cTextDisplay"),u=Object(i["g"])("c-choice-display");return Object(i["e"])(),Object(i["c"])(i["a"],null,[Object(i["d"])(a,{ref:"parser"},null,512),Object(i["d"])(d,{lines:r.linesDisplayed,time:r.time},null,8,["lines","time"]),Object(i["d"])("div",n,[Object(i["d"])(u,{choices:r.choices,onChoiceMade:s.choiceMade},null,8,["choices","onChoiceMade"])])],64)}o("99af"),o("a434"),o("d3b7"),o("ddb0");var r=o("3835"),s=o("b85c"),a={class:"toRemove"},d=Object(i["d"])("br",null,null,-1),u=Object(i["d"])("br",null,null,-1),h=Object(i["d"])("br",null,null,-1);function l(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])(i["a"],null,[(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(this.choices.current,(function(e){return Object(i["e"])(),Object(i["c"])(i["a"],{key:e.id},[r.isToRemove(e)?(Object(i["e"])(),Object(i["c"])(i["a"],{key:0},[Object(i["d"])("button",a,Object(i["h"])(e.title),1),d],64)):(Object(i["e"])(),Object(i["c"])(i["a"],{key:1},[Object(i["d"])("button",{onClick:function(t){return r.onClick(e)}},Object(i["h"])(e.title),9,["onClick"]),u],64))],64)})),128)),(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(this.choices.toAdd,(function(e){return Object(i["e"])(),Object(i["c"])(i["a"],{key:e.id},[Object(i["d"])("button",{onClick:function(t){return r.onClick(e)},class:"toAdd"},Object(i["h"])(e.title),9,["onClick"]),h],64)})),128))],64)}var p={name:"c-choice-display",props:{choices:{}},computed:{},emits:["choice-made"],methods:{onClick:function(e){this.$emit("choice-made",e)},isToRemove:function(e){return-1!==this.IndexById(this.choices.toRemove,e.id)},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(d){i.e(d)}finally{i.f()}return-1}}};o("0876");p.render=l;var f=p;function b(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])("div")}o("b0c0"),o("b64b");var m=o("291a"),O={data:function(){return{params:m.params,choicesPool:m.choices,choicesDisabled:m.choicesDisabled,choicesOnCooldown:m.choicesOnCooldown}},methods:{resetParser:function(){this.params=m.params,this.choicesPool=m.choices,this.choicesDisabled=m.choicesDisabled,this.choicesOnCooldown=m.choicesOnCooldown},updateParser:function(e,t){this.updateParams(e),this.updateTime(t),this.updateChoicesCd(e.duration),this.putChoiceOnCd(e)},updateParams:function(e){if(0!==Object.keys(e.params).length){var t,o=Object(s["a"])(e.params);try{for(o.s();!(t=o.n()).done;){var i=t.value;"="===i.op&&(this.params[i.name]=i.value)}}catch(n){o.e(n)}finally{o.f()}}},updateTime:function(e){this.params["day"]=e.day,this.params["hours"]=e.hour},updateChoicesCd:function(e){for(var t=this.choicesOnCooldown.length-1;t>=0;t--)this.choicesOnCooldown[t].cdCount-=e,this.choicesOnCooldown[t].cdCount<=0&&this.choicesPool.push(this.choicesOnCooldown.splice(t,1)[0])},putChoiceOnCd:function(e){0!==e.cooldown&&(this.choicesPool.splice(this.IndexById(this.choicesPool,e.id),1),-1===e.cooldown?this.choicesDisabled.push(e):(e.cdCount=e.cooldown,this.choicesOnCooldown.push(e)))},updateChoices:function(e){for(var t,o=this.getChoicesFromPool(),i=[],n=e.length-1;n>=0;n--)t=this.IndexById(o.pass,e[n].id),-1!==t?o.pass.splice(t,1):(t=this.IndexById(o.failInit,e[n].id),-1===t&&i.push(e[n]));var c=o.pass;return{current:e,toAdd:c,toRemove:i}},getChoicesFromPool:function(){var e,t={pass:[],failInit:[]},o=Object(s["a"])(this.choicesPool);try{for(o.s();!(e=o.n()).done;){var i=e.value;this.checkConditions(i.conditions)&&(this.checkConditions(i.conditionsInit)?t.pass.push(i):t.failInit.push(i))}}catch(n){o.e(n)}finally{o.f()}return t},checkConditions:function(e){var t,o=Object(s["a"])(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if("=="===i.op&&!this.checkEqual(i))return!1}}catch(n){o.e(n)}finally{o.f()}return!0},checkEqual:function(e){return this.params[e.name]===e.value},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(d){i.e(d)}finally{i.f()}return-1}}};O.render=b;var y=O,v={id:"text-display"},j={id:"timer"},w={ref:"panel"};function C(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])("div",v,[Object(i["d"])("div",j,[Object(i["d"])("h1",null,Object(i["h"])(this.day(o.time.day)+" - "+this.hour),1)]),Object(i["d"])("div",w,[(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(o.lines,(function(e,t){return Object(i["e"])(),Object(i["c"])("p",{key:t},Object(i["h"])(e.choice+" / "+e.text),1)})),128))],512)])}var g={name:"c-text-display",props:{lines:{type:Array},time:{type:Object}},computed:{hour:function(){var e=this.getRandomInt(0,59);return e<10&&(e="0"+e),this.time.hour+":"+e}},methods:{day:function(e){switch(e){case 1:return"Monday";case 2:return"Thuesday";case 3:return"Wednesday";case 4:return"Tuesday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:break}},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},watch:{lines:{handler:function(){},deep:!0}}};o("18d3");g.render=C;var I=g,x={name:"app",components:{cTextDisplay:I,cChoiceDisplay:f,cParser:y},mounted:function(){this.time={day:this.getRandomInt(1,7),hour:this.getRandomInt(0,23)},this.$refs.parser.updateTime(this.time),this.choices.current=this.$refs.parser.getChoicesFromPool().pass},data:function(){return{choices:{current:[],toAdd:[],toRemove:[]},linesDisplayed:[{choice:"Nothing",text:"Just a peaceful void"}],maxChoice:12,time:{day:1,hour:0}}},methods:{choiceMade:function(e){this.applyUpdates(),this.linesDisplayed.unshift({choice:e.title,text:e.text}),this.updateTime(e.duration),this.$refs.parser.updateParser(e,this.time),this.choices=this.$refs.parser.updateChoices(this.choices.current),this.choices.current.length>this.maxChoice&&this.gameOver()},applyUpdates:function(){for(var e=this.choices.toRemove.length-1;e>=0;e--)this.choices.current.splice(this.IndexById(this.choices.current,this.choices.toRemove[e].id),1);this.choices.current=this.choices.current.concat(this.choices.toAdd)},updateTime:function(e){this.time.hour+=e,this.time.hour>23&&(this.time.day+=Math.floor(this.time.hour/23),this.time.hour%=23,this.time.day>7&&(this.time.day%=7))},gameOver:function(){this.choices={current:[],toAdd:[],toRemove:[]},this.cTextDisplay="game over",this.$refs.parser.resetParser()},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(d){i.e(d)}finally{i.f()}return-1},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}};o("346b");x.render=c;var k=x,P=Object(i["b"])(k);P.mount("#app")},"6f04":function(e,t,o){},9478:function(e,t,o){},cf69:function(e,t,o){}});
//# sourceMappingURL=app.ca3952c4.js.map