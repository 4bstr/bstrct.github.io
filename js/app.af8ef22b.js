(function(e){function t(t){for(var i,r,s=t[0],a=t[1],u=t[2],l=0,h=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);d&&d(t);while(h.length)h.shift()();return c.push.apply(c,u||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],i=!0,s=1;s<o.length;s++){var a=o[s];0!==n[a]&&(i=!1)}i&&(c.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},n={app:0},c=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=a;c.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"291a":function(e){e.exports=JSON.parse('{"params":{"vigilante":0,"robinhood":0},"choices":[{"id":0,"title":"Je défend les opprimés","text":"Par opprimés vous voulez dire...","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[],"params":[{"name":"vigilante","op":"=","value":1}]},{"id":1,"title":"Je défend les veuves","text":"D\'accord donc c\'est pour ça que vous demandez à toutes les passantes s\'il elles ont encore un mari ?","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{"name":"vigilante","op":"==","value":1}],"params":[{"name":"vigilante","op":"=","value":2}]},{"id":2,"title":"Je défend les orphelins","text":"D\'accord donc c\'est pour ça que vous demandez à tous les enfants s\'ils y ont des parents ?","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{"name":"vigilante","op":"==","value":1}],"params":[{"name":"vigilante","op":"=","value":2}]},{"id":4,"title":"Je vol les riches","text":"Les riches c\'est à dire ? Et puis dans quel but faîtes vous cela ?","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[],"params":[{"name":"robinhood","op":"=","value":1}]},{"id":5,"title":"Je redistribue aux pauvres","text":"Pourtant il semble que vous ayiez l\'intégralité de la somme sur vous lors de l\'arestation...","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{"name":"robinhood","op":"==","value":1}],"params":[{"name":"robinhood","op":"=","value":2}]},{"id":6,"title":"Sans cet argent je suis pauvre","text":"Ha ben oui, imparable.","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{"name":"robinhood","op":"==","value":2}],"params":[{"name":"robinhood","op":"=","value":3}]},{"id":7,"title":"Ca sonne bizarre dit à haute voix","text":"Je pense que ça sonnait bizarre pour tout le monde oui.","cooldown":-1,"duration":1,"conditionsInit":[],"conditions":[{"name":"vigilante","op":"==","value":2}],"params":[{"name":"vigilante","op":"=","value":3}]}],"choicesDisabled":[],"choicesOnCooldown":[]}')},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("7a23"),n={id:"lower"};function c(e,t,o,c,r,s){var a=Object(i["g"])("c-parser"),u=Object(i["g"])("cTextDisplay"),d=Object(i["g"])("c-choice-display");return Object(i["e"])(),Object(i["c"])(i["a"],null,[Object(i["d"])(a,{ref:"parser"},null,512),Object(i["d"])(u,{lines:r.linesDisplayed,time:r.time},null,8,["lines","time"]),Object(i["d"])("div",n,[Object(i["d"])(d,{choices:r.choices,onChoiceMade:s.choiceMade},null,8,["choices","onChoiceMade"])])],64)}o("99af"),o("a434"),o("d3b7"),o("ddb0");var r=o("3835"),s=o("b85c"),a=Object(i["d"])("br",null,null,-1),u=Object(i["d"])("br",null,null,-1);function d(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])(i["a"],null,[(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(this.choices.current,(function(e){return Object(i["e"])(),Object(i["c"])(i["a"],{key:e.id},[r.isToRemove(e)?(Object(i["e"])(),Object(i["c"])(i["a"],{key:0},[],64)):(Object(i["e"])(),Object(i["c"])(i["a"],{key:1},[Object(i["d"])("button",{onClick:function(t){return r.onClick(e)}},Object(i["h"])(e.title),9,["onClick"]),a],64))],64)})),128)),(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(this.choices.toAdd,(function(e){return Object(i["e"])(),Object(i["c"])(i["a"],{key:e.id},[Object(i["d"])("button",{onClick:function(t){return r.onClick(e)},class:"toAdd"},Object(i["h"])(e.title),9,["onClick"]),u],64)})),128))],64)}var l={name:"c-choice-display",props:{choices:{}},computed:{},emits:["choice-made"],methods:{onClick:function(e){this.$emit("choice-made",e)},isToRemove:function(e){return-1!==this.IndexById(this.choices.toRemove,e.id)},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(u){i.e(u)}finally{i.f()}return-1}}};o("e0b6");l.render=d;var h=l;function p(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])("div")}o("b0c0"),o("b64b");var f=o("291a"),m={data:function(){return{params:f.params,choicesPool:f.choices,choicesDisabled:f.choicesDisabled,choicesOnCooldown:f.choicesOnCooldown}},methods:{resetParser:function(){this.params=f.params,this.choicesPool=f.choices,this.choicesDisabled=f.choicesDisabled,this.choicesOnCooldown=f.choicesOnCooldown},updateParser:function(e,t){this.updateParams(e),this.updateTime(t),this.updateChoicesCd(e.duration),this.putChoiceOnCd(e)},updateParams:function(e){if(0!==Object.keys(e.params).length){var t,o=Object(s["a"])(e.params);try{for(o.s();!(t=o.n()).done;){var i=t.value;"="===i.op&&(this.params[i.name]=i.value)}}catch(n){o.e(n)}finally{o.f()}}},updateTime:function(e){this.params["day"]=e.day,this.params["hours"]=e.hour},updateChoicesCd:function(e){for(var t=this.choicesOnCooldown.length-1;t>=0;t--)this.choicesOnCooldown[t].cdCount-=e,this.choicesOnCooldown[t].cdCount<=0&&this.choicesPool.push(this.choicesOnCooldown.splice(t,1)[0])},putChoiceOnCd:function(e){0!==e.cooldown&&(this.choicesPool.splice(this.IndexById(this.choicesPool,e.id),1),-1===e.cooldown?this.choicesDisabled.push(e):(e.cdCount=e.cooldown,this.choicesOnCooldown.push(e)))},updateChoices:function(e){for(var t,o=this.getChoicesFromPool(),i=[],n=e.length-1;n>=0;n--)t=this.IndexById(o.pass,e[n].id),-1!==t?o.pass.splice(t,1):(t=this.IndexById(o.failInit,e[n].id),-1===t&&i.push(e[n]));var c=o.pass;return{current:e,toAdd:c,toRemove:i}},getChoicesFromPool:function(){var e,t={pass:[],failInit:[]},o=Object(s["a"])(this.choicesPool);try{for(o.s();!(e=o.n()).done;){var i=e.value;this.checkConditions(i.conditions)&&(this.checkConditions(i.conditionsInit)?t.pass.push(i):t.failInit.push(i))}}catch(n){o.e(n)}finally{o.f()}return t},checkConditions:function(e){var t,o=Object(s["a"])(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if("=="===i.op&&!this.checkEqual(i))return!1}}catch(n){o.e(n)}finally{o.f()}return!0},checkEqual:function(e){return this.params[e.name]===e.value},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(u){i.e(u)}finally{i.f()}return-1}}};m.render=p;var b=m,v={id:"text-display"},O=Object(i["d"])("div",{id:"timer"},[Object(i["d"])("h1",null,"La voie du Héro")],-1),y={ref:"panel"};function j(e,t,o,n,c,r){return Object(i["e"])(),Object(i["c"])("div",v,[O,Object(i["d"])("div",y,[(Object(i["e"])(!0),Object(i["c"])(i["a"],null,Object(i["f"])(o.lines,(function(e,t){return Object(i["e"])(),Object(i["c"])("p",{key:t},Object(i["h"])(e.text),1)})),128))],512)])}var g={name:"c-text-display",props:{lines:{type:Array},time:{type:Object}},computed:{hour:function(){var e=this.getRandomInt(0,59);return e<10&&(e="0"+e),this.time.hour+":"+e}},methods:{day:function(e){switch(e){case 1:return"Monday";case 2:return"Thuesday";case 3:return"Wednesday";case 4:return"Tuesday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:break}},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},watch:{lines:{handler:function(){},deep:!0}}};o("e47c");g.render=j;var C=g,x={name:"app",components:{cTextDisplay:C,cChoiceDisplay:h,cParser:b},mounted:function(){this.time={day:this.getRandomInt(1,7),hour:this.getRandomInt(0,23)},this.$refs.parser.updateTime(this.time),this.choices.current=this.$refs.parser.getChoicesFromPool().pass},data:function(){return{choices:{current:[],toAdd:[],toRemove:[]},linesDisplayed:[{choice:"Nothing",text:"Vous me dîtes que vous êtes un héro... Très bien, très bien... Mais quel genre de héro ?"}],maxChoice:12,time:{day:1,hour:0}}},methods:{choiceMade:function(e){this.applyUpdates(),this.linesDisplayed.unshift({choice:e.title,text:e.text}),this.updateTime(e.duration),this.$refs.parser.updateParser(e,this.time),this.choices=this.$refs.parser.updateChoices(this.choices.current),this.choices.current.length>this.maxChoice&&this.gameOver()},applyUpdates:function(){for(var e=this.choices.toRemove.length-1;e>=0;e--)this.choices.current.splice(this.IndexById(this.choices.current,this.choices.toRemove[e].id),1);this.choices.current=this.choices.current.concat(this.choices.toAdd)},updateTime:function(e){this.time.hour+=e,this.time.hour>23&&(this.time.day+=Math.floor(this.time.hour/23),this.time.hour%=23,this.time.day>7&&(this.time.day%=7))},gameOver:function(){this.choices={current:[],toAdd:[],toRemove:[]},this.cTextDisplay="game over",this.$refs.parser.resetParser()},IndexById:function(e,t){var o,i=Object(s["a"])(e.entries());try{for(i.s();!(o=i.n()).done;){var n=Object(r["a"])(o.value,2),c=n[0],a=n[1];if(a.id===t)return c}}catch(u){i.e(u)}finally{i.f()}return-1},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}};o("8e8a");x.render=c;var w=x,I=Object(i["b"])(w);I.mount("#app")},6721:function(e,t,o){},"8e8a":function(e,t,o){"use strict";o("a812")},a812:function(e,t,o){},af55:function(e,t,o){},e0b6:function(e,t,o){"use strict";o("af55")},e47c:function(e,t,o){"use strict";o("6721")}});
//# sourceMappingURL=app.af8ef22b.js.map